

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Cerebro &mdash; Cerebro Wireless Optogenetics System 2.0.4 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Head Implant" href="implant.html" />
    <link rel="prev" title="Cerebro Wireless Optogenetics System v2" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Cerebro Wireless Optogenetics System
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    <a href="../index.html">Overview</a>
    
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cerebro</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#bill-of-materials">Bill of Materials</a></li>
<li class="toctree-l2"><a class="reference internal" href="#programming-instructions">Programming Instructions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup-arduino-ide">Setup Arduino IDE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#burning-a-bootloader">Burning a Bootloader</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uploading-test-program">Uploading Test Program</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uploading-firmware">Uploading Firmware</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#assigning-a-serial-number">Assigning a Serial Number</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="implant.html">Head Implant</a></li>
<li class="toctree-l1"><a class="reference internal" href="base%20station.html">Base Station</a></li>
<li class="toctree-l1"><a class="reference internal" href="charging%20dock.html">Charging Dock</a></li>
<li class="toctree-l1"><a class="reference internal" href="programmer.html">Pogo Connector</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Software/Xavier.html">Xavier</a></li>
</ul>

            
          
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Cerebro Wireless Optogenetics System</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Cerebro</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <!-- User defined GitHub URL -->
              <a href="https://github.com/Karpova-Lab/cerebro" class="fa fa-github"> Cerebro on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="implant.html" class="btn btn-neutral float-right" title="Head Implant" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="Cerebro Wireless Optogenetics System v2" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cerebro">
<h1>Cerebro<a class="headerlink" href="#cerebro" title="Permalink to this headline">¶</a></h1>
<a class="reference internal image-reference" href="../_images/cerebro_views.webp"><img alt="../_images/cerebro_views.webp" class="align-center" src="../_images/cerebro_views.webp" style="width: 100%;" /></a>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="../_images/cerebro5.8.png"><img alt="../_images/cerebro5.8.png" src="../_images/cerebro5.8.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-text"><a class="reference external" href="https://github.com/Karpova-Lab/cerebro/tree/master/PCB%20Files/Cerebro%205.8">Click Here for Design Files</a></span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="bill-of-materials">
<h2>Bill of Materials<a class="headerlink" href="#bill-of-materials" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 13%" />
<col style="width: 27%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Qty</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Part # / Datasheet</p></th>
<th class="head"><p>Order Link</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Cerebro PCB</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/44122f67b175f1b97cbd141379696fcd/cerebro5.8.pdf"><code class="xref download docutils literal notranslate"><span class="pre">Cerebro</span> <span class="pre">5.8</span></code></a></p></td>
<td><p><a class="reference external" href="https://oshpark.com/shared_projects/ASxhDBJv">OSH Park</a></p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>550 mAh Battery</p></td>
<td><p>602835</p></td>
<td><p><a class="reference external" href="https://www.amazon.com/s?k=B09DPNX4KP">Amazon</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>915 MHz Radio</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/74c8c048a80f603a4a9929ff313fb4ba/radio.pdf"><code class="xref download docutils literal notranslate"><span class="pre">RFM69HCW</span></code></a></p></td>
<td><p><a class="reference external" href="https://lowpowerlab.com/shop/product/158">LowPowerLab</a></p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Microcontroller</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/7e9e339d7218526b6e22fe58c3d80e20/MCU_32u4.pdf"><code class="xref download docutils literal notranslate"><span class="pre">ATMEGA32U4-MUR</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=ATMEGA32U4-MURCT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>8 MHz Resonator</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/d5a5a70741a6b923d447d3e8b3871de5/resonator_8mhz.pdf"><code class="xref download docutils literal notranslate"><span class="pre">CSTCE8M00G55-R0</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=490-1195-1-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>3.3V Linear Regulator</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/1178ab7862159a81b0a1c29df712be44/regulator_3v_linear.pdf"><code class="xref download docutils literal notranslate"><span class="pre">AP2112K-3.3TRG1</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=%09AP2112K-3.3TRG1DICT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Fuel Gauge</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/e5fd286d1ae20cd95631800527ae82e3/fuel_gauge.pdf"><code class="xref download docutils literal notranslate"><span class="pre">BQ27441DRZR-G1B</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/product-detail/en/texas-instruments/BQ27441DRZR-G1B/296-39942-1-ND/5177819">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>DAC (12-Bit)</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/612de2b0bcc6a9c6791774f4bc30b884/DAC.pdf"><code class="xref download docutils literal notranslate"><span class="pre">LTC2630ACSC6-LZ12#TRMPBF</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/product-detail/en/linear-technology/LTC2630ACSC6-LZ12-TRMPBF/LTC2630ACSC6-LZ12-TRMPBFCT-ND/1643783">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Op Amp</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/f6616e44cd617d8c311c5c86d201b776/opamp.pdf"><code class="xref download docutils literal notranslate"><span class="pre">OPA237NA/3K</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=296-26265-1-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>NPN Transistor</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/21f73d45eeef770c870aad203008c39a/npn_transistor.pdf"><code class="xref download docutils literal notranslate"><span class="pre">FJX3904TF</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=FJX3904TFCT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Boost Converter</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/9e8c4df4649032d58d74ad853fbdec7f/boost_converter.pdf"><code class="xref download docutils literal notranslate"><span class="pre">MIC2288YD5-TR</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=576-1729-1-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Schottky Diode</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/b225129674938d730735e82c81e423a1/schottky.pdf"><code class="xref download docutils literal notranslate"><span class="pre">MBRM140T3G</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=MBRM140T3GOSCT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>10uH Inductor</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/7094ff45723a41a5d5f24a67d5ffc69b/inductor.pdf"><code class="xref download docutils literal notranslate"><span class="pre">LQH43CN100K03L</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=490-2519-1-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>2mm Pitch Male Header</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/807b49c9e481feb0c4b9eeae7350bfcd/header_male_2mm.pdf"><code class="xref download docutils literal notranslate"><span class="pre">M22-2510805</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=952-1992-nd">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Slide Switch</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/5c83e6b11db491bc0ed6b5a0f8e3c09a/slide_switch2.pdf"><code class="xref download docutils literal notranslate"><span class="pre">PCM12SMTR</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=401-2016-1-nd">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Momentary Button</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/bd64f971160116f3c76312c8562a58b7/momentary.pdf"><code class="xref download docutils literal notranslate"><span class="pre">B3U-1000P</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=sw1020ct">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Micro USB vertical plug</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/416e7dd85401b061a5a2afdf1444c226/usb_plug_vertical.pdf"><code class="xref download docutils literal notranslate"><span class="pre">ZX20-B-5S-UNIT(30)</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=H125237-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Micro USB shielding</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/037d2b7600917e941c1cd84a1d9f52b4/usb_shielding.pdf"><code class="xref download docutils literal notranslate"><span class="pre">ZX20-B-SLDC</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=H11496CT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Micro USB horizontal socket</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/2fa11260651f2efc3274a03b3b24b93a/usb_plug_horizontal.pdf"><code class="xref download docutils literal notranslate"><span class="pre">10118194-0001LF</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=609-4618-1-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Molex Micro-Lock socket</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/f8bb44753a2e0eb4f1f2f2075b682f96/microlock_socket.pdf"><code class="xref download docutils literal notranslate"><span class="pre">5055670271</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=WM17038CT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Molex Micro-Lock plug with wire</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/8fb83e11b1f7380658bfe8bad2ab3191/microlock_plug.pdf"><code class="xref download docutils literal notranslate"><span class="pre">0151360206</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=WM17161-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Red LED (0603)</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/682fe44a6de2a1acf4ed3e06b0c66243/led_red.pdf"><code class="xref download docutils literal notranslate"><span class="pre">LTST-C191KRKT</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=160-1447-1-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Amber LED (0603)</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/fa66e8edd1579ae6e30841d76155e783/led_amber.pdf"><code class="xref download docutils literal notranslate"><span class="pre">LNJ437W84RA</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=%09LNJ437W84RACT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Green LED (0603)</p></td>
<td><p><a class="reference download internal" download="" href="../_downloads/2660ce6de123a5fd8021e9d2580aa758/led_green.pdf"><code class="xref download docutils literal notranslate"><span class="pre">SML-D12M8WT86</span></code></a></p></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=511-1578-1-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>470 nF Capacitor (0805)</p></td>
<td></td>
<td><p><a class="reference external" href="https://www.digikey.com/product-detail/en/avx-corporation/08055C474KAT2A/478-5033-1-ND/1888244">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>1 μF Capacitor (0805)</p></td>
<td></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=1276-1066-1-nd">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>2.2 μF Capacitor (0805)</p></td>
<td></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=587-1286-1">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>10 μF Capacitor (0805)</p></td>
<td></td>
<td><p><a class="reference external" href="https://www.digikey.com/product-detail/en/murata-electronics-north-america/GRM21BR61E106KA73L/490-5523-1-ND/2334919">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>0.01 Ω Resistor (1206)</p></td>
<td></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=P0.01BVCT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>12 Ω Resistor (0603)</p></td>
<td></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=P12.00BYCT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>27 Ω Resistor (0603)</p></td>
<td></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=541-27.0SCT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>2 kΩ Resistor (0603)</p></td>
<td></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=RNCP0603FTD2K00CT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>4.7 kΩ Resistor (0603)</p></td>
<td></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=311-4.70KHRCT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>12 kΩ Resistor (0805)</p></td>
<td></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=311-12.0KCRCT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>20 kΩ Resistor (0603)</p></td>
<td></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=RNCP0603FTD20K0CT-ND">Digi-Key</a></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>100 kΩ Resistor (0603)</p></td>
<td></td>
<td><p><a class="reference external" href="https://www.digikey.com/products/en?keywords=%09311-100KHRCT-ND">Digi-Key</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="programming-instructions">
<h2>Programming Instructions<a class="headerlink" href="#programming-instructions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setup-arduino-ide">
<span id="burn-boot"></span><h3>Setup Arduino IDE<a class="headerlink" href="#setup-arduino-ide" title="Permalink to this headline">¶</a></h3>
<p>Follow these instructions : <a class="reference external" href="https://learn.adafruit.com/adafruit-feather-32u4-basic-proto/arduino-ide-setup">https://learn.adafruit.com/adafruit-feather-32u4-basic-proto/arduino-ide-setup</a></p>
</div>
<div class="section" id="burning-a-bootloader">
<h3>Burning a Bootloader<a class="headerlink" href="#burning-a-bootloader" title="Permalink to this headline">¶</a></h3>
<p>Cerebro is designed to be easily reprogrammed through the onboard micro USB.
However when builing a Cerebro from scratch, you must first burn a <a class="reference external" href="https://www.arduino.cc/en/Tutorial/ArduinoISP">bootloader</a>  onto the microcontroller in order to later upload programs through USB.</p>
<p>To burn a bootloader you need an external programmer that will talk to the microntroller through the In-Circuit Serial Programmer (ISP).
You can use an Arduino as your external ISP and temporarily solder wires to the Cerebro PCB.
I recommmend using a <a class="reference external" href="https://www.tindie.com/products/nsayer/usb-uisp/">USB microISP</a> along with a <a class="reference internal" href="programmer.html"><span class="doc">Pogo Connector</span></a>.</p>
<ol class="arabic simple">
<li><p>The programmer needs to connect to the ISP thru-holes (MOSI, MISO, SCK, RST, GND and 3V) on the Cerebro PCB.</p></li>
</ol>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/programmer.jpg"><img alt="../_images/programmer.jpg" src="../_images/programmer.jpg" style="width: 100%;" /></a>
</div>
<ol class="arabic simple" start="2">
<li><p>In the Arduino IDE, select Tools-&gt;Board-&gt;”Adafruit Feather 32u4”</p></li>
<li><p>Select  Tools-&gt;Programmer-&gt;”USBtinyISP” or Tools-&gt;Programmer-&gt;”ArduinoISP” if using an Arduino as the programmer</p></li>
<li><p>Select Tools-&gt;Burn Bootloader</p></li>
</ol>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/burn.png"><img alt="../_images/burn.png" src="../_images/burn.png" style="width: 307.0px; height: 278.0px;" /></a>
</div>
</div>
<div class="section" id="uploading-test-program">
<h3>Uploading Test Program<a class="headerlink" href="#uploading-test-program" title="Permalink to this headline">¶</a></h3>
<p>To test that the components on the PCB are soldered correctly and that all of the required connections are being made, we upload a test program.</p>
<ol class="arabic simple">
<li><p>Open testBoard.ino in the Arduino IDE.</p></li>
<li><p>Select Tools-&gt;Board-&gt;”Adafruit Feather 32u4”.</p></li>
<li><p>Under the Tools-&gt;Port menu look to see what Serial Ports are available.</p></li>
<li><p>Connect a battery to Cerebro.</p></li>
<li><p>Connect Cerebro to your computer with a usb cord and switch on Cerebro. A red LED should be lit, indicating that Cerebro is on.</p></li>
<li><p>There should now be a new serial port under the Tools-&gt;Port menu that wasn’t there in step 2. This is the Cerebro serial port, select it. If there a new serial port didn’t appear in the menu, make sure Cerebro is turned on and connected via USB. If it still doesn’t appear in the menu, the bootloader may have not been burned correctly, so try burning the bootloader again.</p></li>
<li><p>Click the upload button to upload the the testBoard firmware.</p></li>
<li><p>Open up Serial Monitor by click the magnifying glass icon.</p></li>
<li><p>Set the Serial Monitor Baud Rate to 115200 Baud.</p></li>
<li><p>Two yellow LEDs on Cerebro should be blinking and text should be appearing in the Serial Monitor.</p></li>
<li><p>Follow the instructions on the Serial Monitor. If everything is working properly then the battery monitor should be able to provide a Battery charge %.</p></li>
</ol>
</div>
<div class="section" id="uploading-firmware">
<h3>Uploading Firmware<a class="headerlink" href="#uploading-firmware" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Open cerebro.ino in the Arduino IDE.</p></li>
<li><p>Select Tools-&gt;Board-&gt;”Adafruit Feather 32u4”.</p></li>
<li><p>Click the upload button to upload the the Cerebro firmware.</p></li>
</ol>
</div>
</div>
<div class="section" id="assigning-a-serial-number">
<h2>Assigning a Serial Number<a class="headerlink" href="#assigning-a-serial-number" title="Permalink to this headline">¶</a></h2>
<p>A serial number is assigned to each Cerebro. When a Base Station connects to Cerebro, it communicates on the radio channel corresponding to Cerebro’s serial number. This prevents crosstalk between Base Stations and Cerebros in the case where multiple behavior sessions are being run at the same time in the same room. Each Cerebro being used should setup a unique serial number between 1 and 255 using the process below.</p>
<ol class="arabic simple">
<li><p>Start an Xavier session in Debug Mode. The Base Station should be connnected, and have a green check mark.</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/base_connected.png"><img alt="../_images/base_connected.png" class="align-center" src="../_images/base_connected.png" style="width: 294.0px; height: 116.0px;" /></a>
<ol class="arabic simple" start="2">
<li><p>Click <code class="docutils literal notranslate"><span class="pre">Setup</span> <span class="pre">New</span> <span class="pre">Cerebro</span></code></p></li>
</ol>
<a class="reference internal image-reference" href="../_images/click_new_cerebro.png"><img alt="../_images/click_new_cerebro.png" class="align-center" src="../_images/click_new_cerebro.png" style="width: 294.0px; height: 80.0px;" /></a>
<ol class="arabic simple" start="3">
<li><p>Hold down the button labeled “BTN” on Cerebro until the nearby LED blinks twice. A green checkmark should now be next to the “Cerebro Wireless Connection”.</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/hold.png"><img alt="../_images/hold.png" class="align-center" src="../_images/hold.png" style="width: 100%;" /></a>
<ol class="arabic simple" start="4">
<li><p>Fill in the “Serial Number” box with the serial number you want to give to Cerebro and then click <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">Serial</span> <span class="pre">Number</span></code>.</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/give_number.png"><img alt="../_images/give_number.png" class="align-center" src="../_images/give_number.png" style="width: 294.0px; height: 132.0px;" /></a>
<ol class="arabic simple" start="5">
<li><p>After a few seconds, click the <code class="docutils literal notranslate"><span class="pre">Retry</span> <span class="pre">Connection</span></code> button to confirm everything worked. All three indicators should have green check marks. Cerebro now has a serial number saved to its memory, and whenever it is turned on it will try to communicate with a Base Station on a radio channel of the same number.</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/good.png"><img alt="../_images/good.png" class="align-center" src="../_images/good.png" style="width: 296.0px; height: 62.0px;" /></a>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="implant.html" class="btn btn-neutral float-right" title="Head Implant" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="Cerebro Wireless Optogenetics System v2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2022, Andy Lustig
      <span class="lastupdated">
        Last updated on Jun 13, 2022.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>